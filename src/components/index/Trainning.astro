---
// Programas.astro - Sección de Trayectorias con diseño unificado y animación Slide
---

<section id="programas" class="py-24 px-4 bg-[#050505] relative overflow-hidden">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-[#3b82f6] font-black uppercase tracking-[0.2em] text-sm mb-4">Metodología de Ingreso</h2>
      <h3 class="text-4xl md:text-6xl font-black text-white italic uppercase">Formación Especializada</h3>
    </div>

    {/* Selector de Programas - Estilo Nav integrada */}
    <div class="flex justify-center mb-16">
      <div class="inline-flex bg-[#0a0a0a]/80 backdrop-blur-xl border border-[#262626] rounded-full p-1.5 shadow-2xl overflow-x-auto no-scrollbar max-w-full">
        <button data-index="0" class="tab-btn active px-6 md:px-10 py-3 rounded-full font-bold text-xs md:text-sm uppercase tracking-widest transition-all duration-300 flex items-center gap-2 whitespace-nowrap">
          Adultos
        </button>
        <button data-index="1" class="tab-btn px-6 md:px-10 py-3 rounded-full font-bold text-xs md:text-sm uppercase tracking-widest transition-all duration-300 flex items-center gap-2 whitespace-nowrap text-[#94a3b8]">
          Femenino
        </button>
        <button data-index="2" class="tab-btn px-6 md:px-10 py-3 rounded-full font-bold text-xs md:text-sm uppercase tracking-widest transition-all duration-300 flex items-center gap-2 whitespace-nowrap text-[#94a3b8]">
          Infantil
        </button>
      </div>
    </div>

    {/* Ventana de visualización (Viewport) */}
    <div class="slider-container w-full overflow-hidden">
      {/* El Tren (Wrapper) que se mueve horizontalmente */}
      <div id="slider-wrapper" class="flex transition-transform duration-700 ease-[cubic-bezier(0.19,1,0.22,1)] w-[300%]">
        
        {/* Panel 0: Adultos (Azul) */}
        <div class="w-1/3 flex-shrink-0 px-2 md:px-4">
          <div class="max-w-2xl mx-auto bg-[#0a0a0a] border border-[#3b82f6]/30 p-10 md:p-14 rounded-[3rem] text-center">
            <h4 class="text-[#3b82f6] font-bold uppercase text-[10px] tracking-widest mb-4">Certificación de 12 Meses</h4>
            <h3 class="text-4xl font-black text-white mb-4 italic uppercase leading-tight">Método HITRO</h3>
            <p class="text-[#94a3b8] mb-10 leading-relaxed max-w-lg mx-auto">Formación completa que abarca desde la prevención primaria hasta el combate cuerpo a cuerpo y control de estrés.</p>
            <div class="text-5xl font-black text-[#3b82f6] mb-10 italic">110€<span class="text-sm font-normal text-[#94a3b8]  ml-2 italic">/ mes</span></div>
            <a href="#contacto" class="inline-block px-12 py-4 rounded-2xl bg-[#3b82f6] text-white font-bold hover:bg-blue-600 transition-all transform active:scale-95">Solicitar Entrevista</a>
          </div>
        </div>

        {/* Panel 1: Femenino (Rosa) */}
        <div class="w-1/3 flex-shrink-0 px-2 md:px-4">
          <div class="max-w-2xl mx-auto bg-[#0a0a0a] border border-pink-500/30 p-10 md:p-14 rounded-[3rem] text-center">
            <h4 class="text-pink-500 font-bold uppercase text-[10px] tracking-widest mb-4">Especialización Táctica</h4>
            <h3 class="text-4xl font-black text-white mb-4 italic uppercase leading-tight">Seguridad Femenina</h3>
            <p class="text-[#94a3b8] mb-10 leading-relaxed max-w-lg mx-auto">Entrenamiento táctico adaptado a situaciones reales. Prevención, escape y respuesta contundente en entornos hostiles.</p>
            <div class="text-5xl font-black text-pink-500 mb-10 italic">90€<span class="text-sm font-normal text-[#94a3b8]  ml-2 ">/ mes</span></div>
            <a href="#contacto" class="inline-block px-12 py-4 rounded-2xl bg-pink-500 text-white font-bold hover:bg-pink-600 transition-all transform active:scale-95">Reservar Cita</a>
          </div>
        </div>

        {/* Panel 2: Infantil (Verde) */}
        <div class="w-1/3 flex-shrink-0 px-2 md:px-4">
          <div class="max-w-2xl mx-auto bg-[#0a0a0a] border border-green-500/30 p-10 md:p-14 rounded-[3rem] text-center">
            <h4 class="text-green-500 font-bold uppercase text-[10px] tracking-widest mb-4">Valores y Disciplina</h4>
            <h3 class="text-4xl font-black text-white mb-4 italic uppercase leading-tight">HITRO Kids</h3>
            <p class="text-[#94a3b8] mb-10 leading-relaxed max-w-lg mx-auto">Disciplina, respeto y habilidades antibullying. Ayudamos a construir el carácter y la confianza de los más jóvenes.</p>
            <div class="text-5xl font-black text-green-500 mb-10 italic">85€<span class="text-sm font-normal text-[#94a3b8]  ml-2 italic">/ mes</span></div>
            <a href="#contacto" class="inline-block px-12 py-4 rounded-2xl bg-green-500 text-white font-bold hover:bg-green-600 transition-all transform active:scale-95">Clase de Prueba</a>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  .tab-btn {
    cursor: pointer;
    user-select: none;
  }

  .tab-btn.active {
    background-color: #3b82f6;
    color: white;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>

<script>
  /**
   * Lógica de deslizamiento para paneles en Astro/TypeScript
   */
  const inicializarSlider = () => {
    const tren = document.getElementById('slider-wrapper') as HTMLElement;
    const botones = document.querySelectorAll<HTMLButtonElement>('.tab-btn');

    if (!tren || botones.length === 0) return;

    const totalPaneles = botones.length;

    botones.forEach((boton) => {
      boton.addEventListener('click', () => {
        const indiceRaw = boton.getAttribute('data-index');

        if (indiceRaw !== null) {
          const indice = Number(indiceRaw);
          // El desplazamiento se calcula dividiendo el 100% entre el número de paneles
          const desplazamiento = (indice * 100) / totalPaneles;

          // Aplicamos la transformación horizontal
          tren.style.transform = `translateX(-${desplazamiento}%)`;

          // Gestión de estilos visuales para los botones
          botones.forEach(btn => {
            btn.classList.remove('active', 'text-white');
            btn.classList.add('text-[#94a3b8]');
          });
          
          boton.classList.add('active', 'text-white');
          boton.classList.remove('text-[#94a3b8]');
        }
      });
    });
  };

  // Inicialización compatible con Astro y View Transitions
  document.addEventListener('DOMContentLoaded', inicializarSlider);
  document.addEventListener('astro:page-load', inicializarSlider);
</script>