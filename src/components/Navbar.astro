---
// src/components/Navbar.astro
---

<!-- CONTENEDOR PADRE (Fijo y Centrado) -->
<nav class="fixed top-4 w-full z-50 px-4 flex flex-col items-center">

    <!-- ========================================== -->
    <!-- BARRA VISIBLE (Escritorio + Móvil)         -->
    <!-- ========================================== -->
    <div class="relative w-full max-w-7xl bg-black/90 backdrop-blur-md border border-white/10 rounded-full px-6 py-3 flex justify-between items-center shadow-2xl shadow-blue-900/20 z-50 transition-all hover:border-blue-500/30">

        <!-- 1. LOGO (Izquierda) -->
        <a href="/" class="text-xl font-bold italic tracking-tighter text-white hover:scale-105 transition-transform font-display">
            <span class="text-blue-600 font-display">H</span>ITRO
        </a>

        <!-- 2. ENLACES CENTRALES (Solo PC - Absolutos al centro) -->
        <div class="hidden md:flex items-center gap-8 text-sm font-bold text-gray-400 absolute left-1/2 -translate-x-1/2">
            <a href="#metodo" class="hover:text-white transition-colors uppercase tracking-wide">El Método</a>
            <a href="#tarifas" class="hover:text-white transition-colors uppercase tracking-wide">Admisión</a>
            <a href="/aula-virtual" class="text-blue-500 hover:text-white transition-colors uppercase tracking-wide flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                Aula Virtual
            </a>
        </div>

        <!-- 3. BOTONES DERECHA (Tienda + Hamburguesa) -->
        <div class="flex items-center gap-4">

            <!-- Botón Tienda -->
            <a href="/tienda" class="bg-white text-black px-5 py-2 rounded-full text-[10px] font-black hover:bg-blue-600 hover:text-white transition-all uppercase tracking-widest flex items-center gap-2">
                TIENDA
            </a>

            <!-- Botón Hamburguesa (Solo Móvil) -->
            <button id="menu-btn" class="text-white md:hidden p-1 focus:outline-none hover:text-blue-500 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            </button>
        </div>

    </div>

     <!-- ========================================== -->
    <!-- MENÚ DESPLEGABLE (Solo Móvil)              -->
    <!-- ========================================== -->

    <div id="mobile-menu" class="hidden absolute top-20 w-[95%] max-w-7xl bg-[#0a0a0a] border border-[#262626] rounded-2xl p-4 flex-col gap-2 shadow-2xl z-40 origin-top transition-all duration-300 ease-in-out opacity-0 -translate-y-4 scale-95">
        <a href="#metodo" class="block px-4 py-3 rounded-xl text-gray-300 hover:bg-white/5 hover:text-white transition-colors font-bold text-center font-display uppercase tracking-wide">El Método</a>
        <a href="#tarifas" class="block px-4 py-3 rounded-xl text-gray-300 hover:bg-white/5 hover:text-white transition-colors font-bold text-center font-display uppercase tracking-wide">Admisión</a>
        <a href="/aula-virtual" class="block px-4 py-3 rounded-xl text-blue-500 bg-blue-500/10 hover:bg-blue-500/20 transition-colors font-bold text-center flex justify-center gap-2 font-display uppercase tracking-wide">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
            Aula Virtual
        </a>
    </div>

</nav>

<!-- LÓGICA (Script con Animación) -->
<script>
    const btn = document.getElementById('menu-btn');
    const menu = document.getElementById('mobile-menu');

    btn?.addEventListener('click', () => {
        const isHidden = menu?.classList.contains('hidden');

        if (isHidden) {
            // 1. ABRIR: Quitamos 'hidden' primero para que exista
            menu?.classList.remove('hidden');
            menu?.classList.add('flex');

            // Pequeño retraso (10ms) para permitir que el navegador renderice la caja antes de animar la opacidad
            setTimeout(() => {
                menu?.classList.remove('opacity-0', '-translate-y-4', 'scale-95');
                menu?.classList.add('opacity-100', 'translate-y-0', 'scale-100');
            }, 10);

        } else {
            // 2. CERRAR: Primero animamos hacia fuera (Fade Out)
            menu?.classList.remove('opacity-100', 'translate-y-0', 'scale-100');
            menu?.classList.add('opacity-0', '-translate-y-4', 'scale-95');

            // Esperamos a que termine la animación (300ms) para ocultarlo del todo
            setTimeout(() => {
                menu?.classList.remove('flex');
                menu?.classList.add('hidden');
            }, 300); // Debe coincidir con 'duration-300' del HTML
        }
    });
</script>